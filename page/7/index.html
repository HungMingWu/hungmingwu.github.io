<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="第十三號艦隊">
<meta property="og:url" content="http://yoursite.com/page/7/index.html">
<meta property="og:site_name" content="第十三號艦隊">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="HungMingWu">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/7/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>第十三號艦隊</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">第十三號艦隊</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="user fa-fw"></i>About</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/HungMingWu" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/01/2018-08-01-develop-a-dapp-basaed-on-ethereum-and-truffle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/08/01/2018-08-01-develop-a-dapp-basaed-on-ethereum-and-truffle/" class="post-title-link" itemprop="url">How to develop a DApp  basaed on Ethereum and  truffle </a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-08-01 14:08:00" itemprop="dateCreated datePublished" datetime="2018-08-01T14:08:00+00:00">2018-08-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="先決條件"><a href="#先決條件" class="headerlink" title="先決條件"></a>先決條件</h3><p>首先我們先安裝必要的Python3和Nodejs </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ apt install -y python3 nodejs npm</span><br><span class="line">$ npm install -g ethereumjs-testrpc</span><br></pre></td></tr></table></figure>
<p>接著安裝開發版的Ethereum，由於她不識真正的Ethereum，僅限開發使用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g ethereumjs-testrpc</span><br></pre></td></tr></table></figure>
<p>接著執行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ testrpc</span><br></pre></td></tr></table></figure>
<p>就看到開發版的Ethereum跑起來了，建立了十個帳戶<br>接著開另外一個Terminal來操作，首先我們安裝Truffle</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g truffle</span><br></pre></td></tr></table></figure>
<p>建立一個新項目</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir demo </span><br><span class="line">$ <span class="built_in">cd</span> demo</span><br><span class="line">$ truffle init</span><br></pre></td></tr></table></figure>
<p>這會生成一個command　line的應用程式，如果需要一個GUI版的可以將江最後一行改成，不過操作還是以CLI版為主</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ truffle unbox webpack</span><br></pre></td></tr></table></figure>

<p>接著開始建立合約</p>
<h3 id="第一個合約"><a href="#第一個合約" class="headerlink" title="第一個合約"></a>第一個合約</h3><p>我們首先建立第一筆合約</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$  truffle create contract Test</span><br></pre></td></tr></table></figure>
<p>會產生<code>ontracts/Test.sol</code>這個檔案，不過打開來什麼都沒有<br>因此我們手動修改合約內容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.4;</span><br><span class="line"></span><br><span class="line">contract Test &#123;</span><br><span class="line">    function multiply(uint a) public pure returns(uint d) &#123;</span><br><span class="line">        return a * 7;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接著新建<code>migrations/2_deploy_contracts.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Test = artifacts.require(<span class="string">"./Test.sol"</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">deployer</span>) </span>&#123;</span><br><span class="line">  deployer.deploy(Test);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>接著編譯合約</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ truffle compile</span><br></pre></td></tr></table></figure>
<p>產生的合約在<code>./build/contracts/Test.json</code>，有興趣可以打開來看<br>接著部屬合約，在部屬合約之前要先修改<code>truffle.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">        networks: &#123;</span><br><span class="line">                development: &#123;</span><br><span class="line">                        host: <span class="string">"localhost"</span>,</span><br><span class="line">                        port: <span class="number">8545</span>,</span><br><span class="line">                        network_id: <span class="string">"*"</span></span><br><span class="line">                &#125;,</span><br><span class="line">                live: &#123;</span><br><span class="line">                        host: <span class="string">"178.25.19.88"</span>, <span class="comment">// Random IP for example purposes (do not use)</span></span><br><span class="line">                        port: <span class="number">80</span>,</span><br><span class="line">                        network_id: <span class="number">1</span>,        <span class="comment">// Ethereum public network</span></span><br><span class="line">                &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>先不用館live那組`，保留給真正的Ethereum使用，目前關心的只有development那組，接著我們把合約部屬到development network，也就是Testrpc上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ truffle migrate --net development</span><br></pre></td></tr></table></figure>
<p>切回Testrpc的Terminal，可以看到我們的合約被放上去了</p>
<h3 id="驗證合約"><a href="#驗證合約" class="headerlink" title="驗證合約"></a>驗證合約</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ truffle console</span><br><span class="line">truffle(development)&gt; Test.deployed().<span class="keyword">then</span>(<span class="keyword">function</span>(instance)&#123;contract = instance;&#125;);</span><br><span class="line">truffle(development)&gt; ontract.multiply(10)</span><br><span class="line">igNumber &#123; s: 1, e: 1, c: [ 70 ] &#125;</span><br></pre></td></tr></table></figure>
<p>另外一個方法是跑Unit Test<br>我們新增<code>test/TestTest.sol</code>，然後寫入以下資料</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.16;</span><br><span class="line">import &quot;truffle&#x2F;Assert.sol&quot;;</span><br><span class="line">import &quot;truffle&#x2F;DeployedAddresses.sol&quot;;</span><br><span class="line">import &quot;..&#x2F;contracts&#x2F;Test.sol&quot;;</span><br><span class="line"></span><br><span class="line">contract TestTest &#123;</span><br><span class="line">    Test test &#x3D; Test(DeployedAddresses.Test());</span><br><span class="line">    function testUserCanAdoptPet() public &#123;</span><br><span class="line">        uint returnedId &#x3D; test.multiply(10);</span><br><span class="line">        uint expected &#x3D; 70;</span><br><span class="line">        Assert.equal(returnedId, expected, &quot;10 * 7 &#x3D; 70&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接著跑 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ truffle <span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<h3 id="開發一個DApp"><a href="#開發一個DApp" class="headerlink" title="開發一個DApp"></a>開發一個DApp</h3><p>這就是前面幾個東西組合加上適合的前端<br>Javascript用<a href="https://github.com/ethereum/web3.js/" target="_blank" rel="noopener">web3.js</a><br>Python用<a href="https://web3py.readthedocs.io/en/stable/" target="_blank" rel="noopener">Web3.py</a><br>Java和Android用<a href="https://github.com/web3j/web3j" target="_blank" rel="noopener">web3j</a><br>這邊有範例<br><a href="https://truffleframework.com/tutorials/pet-shop" target="_blank" rel="noopener">Ethereum Pet Shop</a><br><a href="https://github.com/zxs9999/fileHash" target="_blank" rel="noopener">fileHash</a><br>詳細就部戲說了</p>
<h3 id="Final"><a href="#Final" class="headerlink" title="Final"></a>Final</h3><p>這邊只有說要怎麼寫Smart Contract，怎麼Deply Contract`，以及怎麼開發Dapp<br>至於Ethereum 的架設一個字都沒提<br>並且每個Blockchain的Dapp開發情形不同，只是給一個大智的輪廓</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/21/2018-07-21-some-thoughts-about-blockchain/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/07/21/2018-07-21-some-thoughts-about-blockchain/" class="post-title-link" itemprop="url">Some thoughts about blockchain</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-07-21 10:58:00" itemprop="dateCreated datePublished" datetime="2018-07-21T10:58:00+00:00">2018-07-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Blockchain/" itemprop="url" rel="index"><span itemprop="name">Blockchain</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近這段時間對區塊鏈做了一點功課，無關發幣灑幣之類的東西，純粹技術上的研究<br>一開始看了<a href="https://medium.com/@lhartikk/a-blockchain-in-200-lines-of-code-963cc1cc0e54" target="_blank" rel="noopener">A blockchain in 200 lines of code</a><br>看了之後還真的以為大概就這樣，看了現實的專案卻看不懂，真是好傻好天真<br>遇上幾個困難的點，首先是交易這件事<br>上面的教學完全沒提到交易，不過Bitcoin或是Ethereum都把交易看作核心的一部分<br>基於Account的交易反倒容易理解，看到Bitcoin的UTXO Model真是一頭霧水<br>對於不懂的人可以參考<br><a href="https://steemit.com/cn-cryptocurrency/@antonsteemit/utxo" target="_blank" rel="noopener">比特幣UTXO模型介紹-如何解讀比特幣交易</a><br><a href="https://draveness.me/utxo-account-models" target="_blank" rel="noopener">UTXO 与账户余额模型</a><br>除此之外，還有Persistence這點要考慮，資料要怎麼寫入硬碟保存，怎麼讀取，Serialization / /Deserialization 都是學問<br>不過還有一點頭大的，既然是分散式結構，就會有Role的不同<br>有些是Client，有些是Node，有些是Miner<br>Node之間如何達成Consensus，Pow？Pos？Dpos？Others？<br>P2P表示的是既是Server也是Client，同時需要處理兩方面的情況<br>這邊有個很好的範例<br><a href="https://jeiwan.cc/tags/golang/" target="_blank" rel="noopener">Building Blockchain in Go</a><br>除了Network那邊稍弱之外，對有心開發自己Blockchain的人來說，算是一個非常好的範例教學</p>
<h3 id="Final"><a href="#Final" class="headerlink" title="Final"></a>Final</h3><p>雖然技術上有不少東西可以學，不過我對Blockchain的未來不看好<br>倒不是技術有問題，而是我認為有價值的東西通常都需要政府來做<br>發幣賣錢這件事我不喜歡，不過也不是我的看法一定正確，畢竟我也不是個經濟學專家<br>只是覺得除了中心化解法之外，多了一種選擇</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/09/2018-06-09-experience-of-full-stack-development/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/06/09/2018-06-09-experience-of-full-stack-development/" class="post-title-link" itemprop="url">Experience of Full Stack Development</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-06-09 23:19:00" itemprop="dateCreated datePublished" datetime="2018-06-09T23:19:00+00:00">2018-06-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/golang/" itemprop="url" rel="index"><span itemprop="name">golang</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/golang/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近幫朋友幫忙寫一個可以Demo的Protottype，有三個角色<br>Server，Client，Observer<br>許多Client會送資料給Server，Server處理這些資料之後匯集給Observer<br>說來不難的東西，因為用了我不熟的技術，golang + javascript，浪費太多時間<br>果然隔行如隔山啊，寫寫在路上遇到的問題</p>
<h3 id="SSL-TLS-Transport"><a href="#SSL-TLS-Transport" class="headerlink" title="SSL / TLS Transport"></a>SSL / TLS Transport</h3><p>由於想要練習，所以直接用SSL來當作傳輸協定，跟TCP大同小異，不過困難的是Certificate的產生<br>Server端</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">cert, err := tls.LoadX509KeyPair(<span class="string">"certs/server.pem"</span>, <span class="string">"certs/server.key"</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">	log.Fatalf(<span class="string">"server: loadkeys: %s"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">config := tls.Config&#123;Certificates: []tls.Certificate&#123;cert&#125;&#125;</span><br><span class="line">config.Rand = rand.Reader</span><br><span class="line">service := <span class="string">"0.0.0.0:8000"</span></span><br><span class="line">listener, err := tls.Listen(<span class="string">"tcp"</span>, service, &amp;config)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">	log.Fatalf(<span class="string">"server: listen: %s"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">	conn, err := listener.Accept()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Printf(<span class="string">"server: accept: %s"</span>, err)</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">defer</span> conn.Close()</span><br><span class="line">	log.Printf(<span class="string">"server: accepted from %s"</span>, conn.RemoteAddr())</span><br><span class="line">	tlscon, ok := conn.(*tls.Conn)</span><br><span class="line">	<span class="keyword">if</span> ok &#123;</span><br><span class="line">		log.Print(<span class="string">"ok=true"</span>)</span><br><span class="line">		state := tlscon.ConnectionState()</span><br><span class="line">		<span class="keyword">for</span> _, v := <span class="keyword">range</span> state.PeerCertificates &#123;</span><br><span class="line">			log.Print(x509.MarshalPKIXPublicKey(v.PublicKey))</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">go</span> handleClient(conn)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		log.Print(<span class="string">"reject connection"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Client端</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cert, err := tls.LoadX509KeyPair(<span class="string">"certs/client.pem"</span>, <span class="string">"certs/client.key"</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">	log.Fatalf(<span class="string">"server: loadkeys: %s"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">config := tls.Config&#123;Certificates: []tls.Certificate&#123;cert&#125;, InsecureSkipVerify: <span class="literal">true</span>&#125;</span><br><span class="line">conn, err := tls.Dial(<span class="string">"tcp"</span>, <span class="string">"127.0.0.1:8000"</span>, &amp;config)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatalf(<span class="string">"client: dial: %s"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">clientFunc(conn)</span><br></pre></td></tr></table></figure>
<p>至於Certificate是用Openssl產生的，於是產生第二個問題</p>
<h3 id="Websocket"><a href="#Websocket" class="headerlink" title="Websocket"></a>Websocket</h3><p>這個坑實在死的不明不白<br>Server端原先這樣寫</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">http.HandleFunc(<span class="string">"/ws"</span>, <span class="function"><span class="keyword">func</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">	log.Print(<span class="string">"New websocket arrive"</span>)</span><br><span class="line">	serveWs(hub, w, r)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">if</span> err := http.ListenAndServeTLS(<span class="string">"localhost:8888"</span>, <span class="string">"certs/server.pem"</span>, <span class="string">"certs/server.key"</span>, <span class="literal">nil</span>); err != <span class="literal">nil</span> &#123;</span><br><span class="line">	log.Fatal(<span class="string">"ListenAndServe:"</span>, err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>而Observer端則是</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ws = <span class="keyword">new</span> WebSocket(<span class="string">"wss://127.0.0.1:8888/ws"</span>)</span><br></pre></td></tr></table></figure>
<p>看起來沒什麼問題，不過不然，目前的websocket不能接受 Self hosted certificate，然後就怎麼連都連不上了<br>為了省事，直接用<code>ws</code>和<code>http</code>傳輸了</p>
<h3 id="Aggregate-Json"><a href="#Aggregate-Json" class="headerlink" title="Aggregate Json"></a>Aggregate Json</h3><p>我想要做的功能是假設<br>Client A傳送</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123;<span class="attr">Name</span>: <span class="string">'aaa'</span>, <span class="attr">Age</span>: <span class="number">18</span>&#125;, &#123;<span class="attr">Name</span>: <span class="string">'bbb'</span>, <span class="attr">Age</span>: <span class="number">81</span>&#125;]</span><br></pre></td></tr></table></figure>
<p>Client B傳送`</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123;<span class="attr">Name</span>: <span class="string">'ccc'</span>, <span class="attr">Age</span>: <span class="number">28</span>&#125;, &#123;<span class="attr">Name</span>: <span class="string">'bbb'</span>, <span class="attr">Age</span>: <span class="number">82</span>&#125;]</span><br></pre></td></tr></table></figure>
<p>Oberver會看到</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123;<span class="attr">Name</span>: <span class="string">'aaa'</span>, <span class="attr">Age</span>: <span class="number">18</span>&#125;, &#123;<span class="attr">Name</span>: <span class="string">'bbb'</span>, <span class="attr">Age</span>: <span class="number">81</span>&#125;, &#123;<span class="attr">Name</span>: <span class="string">'ccc'</span>, <span class="attr">Age</span>: <span class="number">28</span>&#125;, &#123;<span class="attr">Name</span>: <span class="string">'bbb'</span>, <span class="attr">Age</span>: <span class="number">82</span>&#125;]</span><br></pre></td></tr></table></figure>
<p>我不太熟悉golang對json的操作，於是寫了醜陋無比的程式碼</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> keyvalue <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">string</span></span><br><span class="line"><span class="keyword">var</span> keyvalueslice []keyvalue</span><br><span class="line"><span class="keyword">for</span> _, v := <span class="keyword">range</span> Map &#123;</span><br><span class="line">	<span class="keyword">var</span> m1 []keyvalue</span><br><span class="line">	<span class="keyword">if</span> err := json.Unmarshal([]<span class="keyword">byte</span>(v), &amp;m1); err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Print(err)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> _, obj := <span class="keyword">range</span> m1 &#123;</span><br><span class="line">		keyvalueslice = <span class="built_in">append</span>(keyvalueslice, obj)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">b, _ := json.Marshal(keyvalueslice)</span><br></pre></td></tr></table></figure>
<p>實在感到羞恥啊…</p>
<h3 id="React-Webpack"><a href="#React-Webpack" class="headerlink" title="React / Webpack"></a>React / Webpack</h3><p>雖然知道React跟Webpack，不過實際拿來用是另外一回事<br>React還好，因為我沒用到太深的東西，不過webpack.config.js很複雜<br>要找Websocket Bug的時候，SourceMap還生不出來，只好土法煉鋼</p>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>隔行如隔山，不跳脫舒適圈去搞些平時不會搞的東西，什麼時候死都不知道<br>不過這次經驗真是讓我充滿挫折 Orz</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/02/2018-05-02-nodejs-addon-development/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/05/02/2018-05-02-nodejs-addon-development/" class="post-title-link" itemprop="url">Nodejs Addon development</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-05-02 14:17:00" itemprop="dateCreated datePublished" datetime="2018-05-02T14:17:00+00:00">2018-05-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/Rust/" itemprop="url" rel="index"><span itemprop="name">Rust</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/Rust/Javascript/" itemprop="url" rel="index"><span itemprop="name">Javascript</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>原先的NodeJS要跑Addon，通常都是寫Native C++ Code<br>不過現在Rust的影響力日漸增加，路也不只一條<br>在我的<a href="https://github.com/HungMingWu/nodejs_addon_example" target="_blank" rel="noopener">Github</a>分別提供了兩種做法</p>
<h3 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h3><p>搭配<a href="https://github.com/nodejs/node-gyp" target="_blank" rel="noopener">node-gyp</a>使用<br>程式碼就不列了，寫出其他細節</p>
<p><code>binding.gyp</code>的寫法如下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"targets"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"target_name"</span>: <span class="string">"fib"</span>,</span><br><span class="line">            <span class="string">"sources"</span>: [ <span class="string">"fib.cc"</span> ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>編譯產生出<code>fib.node</code>，它的本質就是shared object</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ node-gyp configure build</span><br></pre></td></tr></table></figure>
<p>至於Nodejs的使用方式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Fib = <span class="built_in">require</span>(<span class="string">'fib'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(Fib.fib(<span class="number">40</span>));</span><br></pre></td></tr></table></figure>

<h3 id="Rust"><a href="#Rust" class="headerlink" title="Rust"></a>Rust</h3><p>Rust的產生端比較簡單，重點在於<code>Cargo.toml</code><br>注意<code>crate-type</code>那欄指定dylib，也就是shared object</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[package]</span><br><span class="line">name = <span class="string">"fib_rs"</span></span><br><span class="line">version = <span class="string">"0.1.0"</span></span><br><span class="line">authors = [<span class="string">"hm"</span>]</span><br><span class="line"></span><br><span class="line">[lib]</span><br><span class="line">name = <span class="string">"fib"</span></span><br><span class="line">path = <span class="string">"src/fib.rs"</span></span><br><span class="line">crate-type = ["dylib"]</span><br></pre></td></tr></table></figure>
<p>編譯產生<code>libfib.so</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cargo build --release</span><br></pre></td></tr></table></figure>
<p>Nodejs的使用方式就比C++版複雜一點，需要<a href="https://github.com/node-ffi/node-ffi" target="_blank" rel="noopener">node-ffi</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ffi = <span class="built_in">require</span>(<span class="string">'ffi'</span>);</span><br><span class="line"><span class="keyword">const</span> rust = ffi.Library(<span class="string">'libfib'</span>, &#123;</span><br><span class="line">  fib: [<span class="string">'int'</span>, [<span class="string">'int'</span>]]</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(rust.fib(<span class="number">40</span>));</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/14/2018-04-14-compile-llvm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/14/2018-04-14-compile-llvm/" class="post-title-link" itemprop="url">Compile LLVM & Clang</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-04-14 02:30:00" itemprop="dateCreated datePublished" datetime="2018-04-14T02:30:00+00:00">2018-04-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LLVM-Clang/" itemprop="url" rel="index"><span itemprop="name">LLVM Clang</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>隨著LLVM 3.3版本出來，記錄一下如河編譯，編譯環境是Mint 15。<br>使用<strong>CMake</strong>來幫助編譯。</p>
<p>CMake是用來產生個平台(Windows/MacOSX/Linux/FreeBSD等)建置專案的解決方案，在Visual Studio產生Solutions，在Linux產生正統的Makefile。 更多的CMake用法可以在網路找到。</p>
<h2 id="前期作業"><a href="#前期作業" class="headerlink" title="前期作業"></a>前期作業</h2><p>先把所有Code下載下來</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ svn co http:&#x2F;&#x2F;llvm.org&#x2F;svn&#x2F;llvm-project&#x2F;llvm&#x2F;trunk llvm</span><br><span class="line">$ cd llvm&#x2F;tools</span><br><span class="line">$ svn co http:&#x2F;&#x2F;llvm.org&#x2F;svn&#x2F;llvm-project&#x2F;cfe&#x2F;trunk clang</span><br><span class="line">$ svn co https:&#x2F;&#x2F;llvm.org&#x2F;svn&#x2F;llvm-project&#x2F;lld&#x2F;trunk&#x2F; lld</span><br><span class="line">$ svn co https:&#x2F;&#x2F;llvm.org&#x2F;svn&#x2F;llvm-project&#x2F;lldb&#x2F;trunk&#x2F; lldb</span><br><span class="line">$ cd clang&#x2F;tools</span><br><span class="line">$ svn co http:&#x2F;&#x2F;llvm.org&#x2F;svn&#x2F;llvm-project&#x2F;clang-tools-extra&#x2F;trunk extra</span><br><span class="line">$ cd ..&#x2F;..&#x2F;..&#x2F;projects&#x2F;</span><br><span class="line">$ svn co http:&#x2F;&#x2F;llvm.org&#x2F;svn&#x2F;llvm-project&#x2F;compiler-rt&#x2F;trunk compiler-rt</span><br><span class="line">$ svn co https:&#x2F;&#x2F;llvm.org&#x2F;svn&#x2F;llvm-project&#x2F;openmp&#x2F;trunk&#x2F; openmp</span><br><span class="line">$ svn co https:&#x2F;&#x2F;llvm.org&#x2F;svn&#x2F;llvm-project&#x2F;libcxx&#x2F;trunk&#x2F; libcxx</span><br><span class="line">$ svn co https:&#x2F;&#x2F;llvm.org&#x2F;svn&#x2F;llvm-project&#x2F;libcxxabi&#x2F;trunk&#x2F; libcxxabi</span><br><span class="line">$ svn co https:&#x2F;&#x2F;llvm.org&#x2F;svn&#x2F;llvm-project&#x2F;libunwind&#x2F;trunk&#x2F; libunwind</span><br><span class="line">$ cd ..</span><br></pre></td></tr></table></figure>

<h2 id="Build-Swig"><a href="#Build-Swig" class="headerlink" title="Build Swig"></a>Build Swig</h2><h2 id="編譯"><a href="#編譯" class="headerlink" title="編譯"></a>編譯</h2><p>建立一個build目錄放置CMake的設定黨，由於CMake支援<code>Out-of-source Build</code>技術，原先的目錄可以不遭受污染，就算失敗就只要砍掉build的目錄即可。我們使用Out-of-source Build的方式來建置Makefile。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir build &amp;&amp; cd build</span><br><span class="line">$ cmake -DCMAKE_BUILD_TYPE&#x3D;Release -DCMAKE_INSTALL_PREFIX:PATH&#x3D;&#x2F;usr&#x2F;local ..</span><br><span class="line">$ make -j 4</span><br><span class="line">$ make install</span><br></pre></td></tr></table></figure>
<p>這裡的<code>cmake -DCMAKE_INSTALL_PREFIX:PATH=/usr/local</code> 等價於傳統的 <code>./configure --prefix=/usr/local/</code>方式，預設的LLVM跟Clang是使用Debug Mode，這裡使用Release Mode。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/06/2018-04-06-7115562/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/06/2018-04-06-7115562/" class="post-title-link" itemprop="url">inline meaning difference between C and C++</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-04-06 02:02:00" itemprop="dateCreated datePublished" datetime="2018-04-06T02:02:00+00:00">2018-04-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>看了知乎<a href="https://www.zhihu.com/question/270847649/answer/358472568" target="_blank" rel="noopener">這篇</a><br>之後才知道<code>inline</code>博大精深</p>
<p>先看程式碼</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">f</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123; &#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        f();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>用g++編譯這段程式，不管下<code>-O2</code>或是<code>-O0</code>都編譯的過<br>而如果用gcc編譯的話，<code>-O0</code>會出現unrefernce error，但如果下<code>-std=gnu89</code>又沒問題</p>
<p>根據知乎上面寫的，正確的修復方式應該為</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">void</span> <span class="title">f</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>C++跟C99之後，語意分歧點越來越多啊</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/22/2018-03-22-7045132/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/22/2018-03-22-7045132/" class="post-title-link" itemprop="url">Safety rollback remote commit for git</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-22 13:02:00" itemprop="dateCreated datePublished" datetime="2018-03-22T13:02:00+00:00">2018-03-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/git/" itemprop="url" rel="index"><span itemprop="name">git</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Rollback changelist是很常做的事情，不過在git這種分散式控制系統就有點麻煩了<br>假設我們現在有這樣的Commit history</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --oneline</span><br><span class="line">e922d2b (HEAD -&gt; master) ver 4</span><br><span class="line">1b01602 ver 3</span><br><span class="line">10dd293 ver 2</span><br><span class="line">72d57f9 ver 1</span><br></pre></td></tr></table></figure>
<p>而我們現在要退回<code>ver 2</code>該怎麼做</p>
<h3 id="危險的作法"><a href="#危險的作法" class="headerlink" title="危險的作法"></a>危險的作法</h3><p>直接開大絕</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git reset 10dd293 --hard</span><br><span class="line">$ git push origin master</span><br></pre></td></tr></table></figure>
<p>然而自己一個人玩玩還行，團體行動絕對沒有人建議這麼做</p>
<h3 id="安全的作法"><a href="#安全的作法" class="headerlink" title="安全的作法"></a>安全的作法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout 10dd293 -b v2 <span class="comment"># 切換新分支</span></span><br><span class="line">$ git merge -s ours master</span><br><span class="line">$ git <span class="built_in">log</span> --oneline</span><br><span class="line">ce6c1ea (HEAD -&gt; v2) Merge branch <span class="string">'master'</span> into v2</span><br><span class="line">e922d2b (master) ver 4</span><br><span class="line">1b01602 ver 3</span><br><span class="line">10dd293 ver 2</span><br><span class="line">72d57f9 ver 1</span><br></pre></td></tr></table></figure>
<p>可以看見HEAD指向v2的new commit了，比較一下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git diff HEAD..10dd293</span><br></pre></td></tr></table></figure>
<p>然後可以把v2推向remote了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git push origin master</span><br><span class="line">$ git push origin v2:master</span><br><span class="line">$ git push origin HEAD:master</span><br></pre></td></tr></table></figure>
<p>三者等價</p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p>— <a href="http://harttle.land/2018/03/12/reset-origin-without-force-push.html" target="_blank" rel="noopener">安全地回滚远程分支</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/14/2018-03-14-some-thoughts-about-duck-typing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/14/2018-03-14-some-thoughts-about-duck-typing/" class="post-title-link" itemprop="url">Some thoughts about duck typing</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-14 14:15:00" itemprop="dateCreated datePublished" datetime="2018-03-14T14:15:00+00:00">2018-03-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/golang/" itemprop="url" rel="index"><span itemprop="name">golang</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>再不寫點東西，這邊就長草了<br>這幾天在看<code>go-redis</code>專案，顧名思義就是在golang當中對redis操作的程式庫</p>
<p>其中有一段程式碼是這樣</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ExampleClient</span><span class="params">()</span></span> &#123;</span><br><span class="line">	err := client.Set(<span class="string">"key"</span>, <span class="string">"value"</span>, <span class="number">0</span>).Err()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="built_in">panic</span>(err)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>結果去<code>redis.go</code>裡面查看，找不到<code>Set</code>這個函數的實作<br>只好用grep去找哪邊可能實作這個函數<br>最後讓我在<code>command.go</code>找到</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *cmdable)</span> <span class="title">Set</span><span class="params">(key <span class="keyword">string</span>, value <span class="keyword">interface</span>&#123;&#125;, expiration time.Duration)</span> *<span class="title">StatusCmd</span></span> &#123;</span><br><span class="line">	args := <span class="built_in">make</span>([]<span class="keyword">interface</span>&#123;&#125;, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">	args[<span class="number">0</span>] = <span class="string">"set"</span></span><br><span class="line">	args[<span class="number">1</span>] = key</span><br><span class="line">	args[<span class="number">2</span>] = value</span><br><span class="line">	<span class="keyword">if</span> expiration &gt; <span class="number">0</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> usePrecise(expiration) &#123;</span><br><span class="line">			args = <span class="built_in">append</span>(args, <span class="string">"px"</span>, formatMs(expiration))</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			args = <span class="built_in">append</span>(args, <span class="string">"ex"</span>, formatSec(expiration))</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cmd := NewStatusCmd(args...)</span><br><span class="line">	c.process(cmd)</span><br><span class="line">	<span class="keyword">return</span> cmd</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在同一個檔案中找到<code>cmdable</code>的定義</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> cmdable <span class="keyword">struct</span> &#123;</span><br><span class="line">	process <span class="function"><span class="keyword">func</span><span class="params">(cmd Cmder)</span> <span class="title">error</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>回頭看我們的<code>redis.go</code>，發現一樣的東西</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> baseClient <span class="keyword">struct</span> &#123;</span><br><span class="line">    <span class="comment">// Ignore unrelated fields</span></span><br><span class="line">	process           <span class="function"><span class="keyword">func</span><span class="params">(Cmder)</span> <span class="title">error</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因為有同樣的Singature，所以可以把<code>baseClient</code>當cmder`來用</p>
<h3 id="所以？"><a href="#所以？" class="headerlink" title="所以？"></a>所以？</h3><p>雖然找到了我想要的答案，不過我不喜歡這方法<br><strong>由於我找不到Set這函數，於是我需要grep找到可能的實作</strong> =&gt; <strong>發現baseClient和cmadble的相似處</strong><br>那為什麼不直接用繼承關係就好了，這樣可以找到相依性</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">ICmdable</span> &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="built_in">std</span>::error <span class="title">process</span><span class="params">(...)</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">baseClient</span> :</span> ICmdable &#123;</span><br><span class="line">    <span class="function"><span class="built_in">std</span>::error <span class="title">process</span><span class="params">(...)</span> <span class="keyword">override</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>這樣可以看出<code>baseClient</code>必須繼承’ICmdable’這個介面<br>不過可能引申出多重繼承的問題，老話一句，沒有什麼方法一體適用</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/25/2018-01-25-5304193/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/25/2018-01-25-5304193/" class="post-title-link" itemprop="url">PyTorch + Onnx + Caffe2 C++ Library</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-25 14:20:00" itemprop="dateCreated datePublished" datetime="2018-01-25T14:20:00+00:00">2018-01-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/ML/" itemprop="url" rel="index"><span itemprop="name">ML</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>現在在科技業沒講個深度學習會被翻白眼，Prototype是一回事，放進Product又是另一回事<br>之前一般來說通用信的選擇是Tensorflow，雖說Prototype跟Product可以一起完成<br>不過C++那端難寫就算了，Python那邊也麻煩的要死，沒太多精力搞這個<br>後來看到<a href="http://pytorch.org/" target="_blank" rel="noopener">PyTorch</a>，<a href="https://onnx.ai/" target="_blank" rel="noopener">Onnx</a>，以及<a href="https://caffe2.ai/" target="_blank" rel="noopener">Caffe2</a>改變了想法<br>用易學易用的PyTorch建構出Onnx Mdoel，透過Onnx轉換成Caffe2 Model，加上對終端最佳化的Caffe2 Library<br>變成另外一種可行的解法<br>我自己的實驗結果就放在  <a href="https://github.com/HungMingWu/pytorch_caffe2_cpp_binding" target="_blank" rel="noopener">GitHub</a><br>其中C++ Demo的部分是從Caffe2 Android Example那邊學來的<br>雖然看起來不多，不過真正讓他可以動倒是花了不少時間</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/02/2018-01-02-4712545/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/01/02/2018-01-02-4712545/" class="post-title-link" itemprop="url">KCAES - Kernel Crypto AES for Linux</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-01-02 14:20:00" itemprop="dateCreated datePublished" datetime="2018-01-02T14:20:00+00:00">2018-01-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>過年前有個工作需求，需要跨平台的AES硬體加速功能，研究了一下幾種方案<br>– Openssl (增加相依性，加上編譯時需要設定改來改去)<br>– Runtime JIT (先判斷CPU種類，然後根據CPU類型生成組合語言，小小的玩意哪需要玩這麼大)<br>– <a href="https://github.com/smuellerDD/libkcapi" target="_blank" rel="noopener">libkcapi – Linux Kernel Crypto API User Space Interface Library</a><br>覺得最後一種方式不錯，不過我只需要AES，其他地方可以拿掉<br>因此對這Project進行二次加工，產生了<a href="https://github.com/HungMingWu/kcaes" target="_blank" rel="noopener">KCAES</a>這個專案<br>不過在進行AES CBC運算時，發現長度超過64K就會報錯，只好對超過64K的Block進行二次加工<br>不需要其他的相依性，只要把檔案放進自己的專案，加入編譯即可</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          
<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">HungMingWu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">258</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">148</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">HungMingWu</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
