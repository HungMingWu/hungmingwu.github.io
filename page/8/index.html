<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="第十三號艦隊">
<meta property="og:url" content="http://yoursite.com/page/8/index.html">
<meta property="og:site_name" content="第十三號艦隊">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="HungMingWu">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>第十三號艦隊</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">第十三號艦隊</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="user fa-fw"></i>About</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/HungMingWu" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/16/2017-12-16-summary-about-c-part-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/12/16/2017-12-16-summary-about-c-part-3/" class="post-title-link" itemprop="url">Summary about C++17 Part 3</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-12-16 02:52:00" itemprop="dateCreated datePublished" datetime="2017-12-16T02:52:00+00:00">2017-12-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>去英國晃了一圈，回來還是寫點東西，免得生疏了</p>
<h3 id="static-assert"><a href="#static-assert" class="headerlink" title="static_assert"></a>static_assert</h3><p>沒什麼好說的，就是static_assert改成允許單參數，直接看程式碼</p>
<p>Before C++17</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static_assert</span>(<span class="keyword">sizeof</span>(short) == <span class="number">2</span>, <span class="string">"sizeof(short) == 2"</span>)</span><br></pre></td></tr></table></figure>
<p>After C++17</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static_assert</span>(<span class="keyword">sizeof</span>(short) == <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<h3 id="Inline-Variables"><a href="#Inline-Variables" class="headerlink" title="Inline Variables"></a>Inline Variables</h3><p>對Header-Only library特別有用，不過我不喜歡Header-Only library<br>原先如果要定義一個變數，要在header宣告，在source code裡面定義<br>現在可以直接寫在header裡了</p>
<p>Before C++17:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// foo.h</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> foo;</span><br><span class="line"></span><br><span class="line"><span class="comment">// foo.cpp</span></span><br><span class="line"><span class="keyword">int</span> foo = <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<p>After C++17:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// foo.h</span></span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">int</span> foo = <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<h3 id="constexpr-labmda"><a href="#constexpr-labmda" class="headerlink" title="constexpr labmda"></a>constexpr labmda</h3><p>原先C++14辦不到，C++17允許的能力</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="keyword">int</span> <span class="title">Func</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">auto</span> f = [x]() &#123; <span class="keyword">return</span> x * x; &#125;;</span><br><span class="line">  <span class="keyword">return</span> x + f();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不過我還沒想到這東西可以做啥</p>
<h3 id="capture-this"><a href="#capture-this" class="headerlink" title="capture [*this]"></a>capture [*this]</h3><p>原本我還搞不懂<code>capture [this]</code>和<code>capture [*this]</code>有什麼不同，自己寫了一個範例之後搞懂了</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Obj</span> &#123;</span></span><br><span class="line">    Obj() = <span class="keyword">default</span>;</span><br><span class="line">    Obj(<span class="keyword">const</span> Obj&amp;) &#123; <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Copy Constructor\n"</span>; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">g</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">h</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> lambda1 = [<span class="keyword">this</span>]() <span class="keyword">mutable</span> &#123; f(); &#125;;</span><br><span class="line">        <span class="keyword">auto</span> lambda2 = [self = *<span class="keyword">this</span>]() <span class="keyword">mutable</span> &#123; self.g(); &#125;;</span><br><span class="line">        <span class="keyword">auto</span> lambda3 = [*<span class="keyword">this</span>]() <span class="keyword">mutable</span> &#123; h(); &#125;;</span><br><span class="line">        lambda1();</span><br><span class="line">        lambda2();</span><br><span class="line">        lambda3();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Obj o;</span><br><span class="line">    o.func();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>capture [*this]</code>相當於上面的<code>[self = *this]</code>，會將原有的物件複製一份<br>而<code>[this]</code>不會</p>
<h3 id="More-Attributes"><a href="#More-Attributes" class="headerlink" title="More Attributes"></a>More Attributes</h3><p>C++11引進了Attribute，在C++17增加了更多attributes，如[[fallthrough]]等<br>就是把GCC/VC的attribute標準化，不多做解釋了</p>
<h3 id="Rest"><a href="#Rest" class="headerlink" title="Rest"></a>Rest</h3><p>至於STL的加強就不特別寫了, Guaranteed Copy Elision可能要另外寫<br>就先寫到這了</p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p>— <a href="https://github.com/tvaneerd/cpp17_in_TTs" target="_blank" rel="noopener">cpp17_in_TTs</a><br>— <a href="https://www.viva64.com/en/b/0533/#ID0EWYCK" target="_blank" rel="noopener">C++17</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/11/11/2017-11-11-summary-about-c-part-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/11/11/2017-11-11-summary-about-c-part-2/" class="post-title-link" itemprop="url">Summary about C++17 Part 2</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-11-11 01:19:00" itemprop="dateCreated datePublished" datetime="2017-11-11T01:19:00+00:00">2017-11-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="if-constexpr"><a href="#if-constexpr" class="headerlink" title="if constexpr"></a>if constexpr</h3><p>以往我們可能寫出類似這樣的程式碼</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">func</span><span class="params">(T)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;&gt;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">func</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">string</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">12</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;&gt;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">34</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> func(<span class="built_in">std</span>::<span class="built_in">string</span>(<span class="string">"123"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如今我們可以寫成這樣</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">func</span><span class="params">(T)</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">if</span> <span class="title">constexpr</span> <span class="params">(<span class="built_in">std</span>::is_same_v&lt;T, <span class="built_in">std</span>::<span class="built_in">string</span>&gt;)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">12</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> <span class="keyword">constexpr</span>(<span class="built_in">std</span>::is_same_v&lt;T, <span class="keyword">int</span>&gt;) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">34</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> func(<span class="built_in">std</span>::<span class="built_in">string</span>(<span class="string">"123"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>省去了很多的冗於<br>如果配合<code>variant</code>來使用，程式碼可以寫成這樣</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;variant&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> unionType = <span class="built_in">std</span>::variant&lt;<span class="built_in">std</span>::<span class="built_in">string</span>, <span class="keyword">int</span>&gt;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    unionType v = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">std</span>::visit([](<span class="keyword">const</span> <span class="keyword">auto</span> &amp;v) &#123;</span><br><span class="line">        <span class="keyword">using</span> T = <span class="built_in">std</span>::<span class="keyword">decay_t</span>&lt;<span class="keyword">decltype</span>(v)&gt;;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">constexpr</span> (<span class="built_in">std</span>::is_same_v&lt;T, <span class="keyword">int</span>&gt;) <span class="keyword">return</span> <span class="number">12</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">34</span>;</span><br><span class="line">    &#125;, v);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Class-Deduction-guide"><a href="#Class-Deduction-guide" class="headerlink" title="Class Deduction guide"></a>Class Deduction guide</h3><p>在c++17之前，寫了很多這樣子的程式碼</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::mutex m;</span><br><span class="line"><span class="function"><span class="built_in">std</span>::lock_guard&lt;<span class="built_in">std</span>::mutex&gt; <span class="title">lock</span><span class="params">(m)</span></span>;</span><br></pre></td></tr></table></figure>
<p>為什麼函數可以推導出型別，而類型不行，於是C++17放寬了這條件</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">std</span>::lock_guard <span class="title">lock</span><span class="params">(m)</span></span>;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span> v&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br></pre></td></tr></table></figure>
<p>當然，也是有explicit class deduction guide的，請參考reference</p>
<h3 id="template-lt-auto-gt"><a href="#template-lt-auto-gt" class="headerlink" title="template &lt;auto&gt;"></a>template <code>&lt;auto&gt;</code></h3><p>目前看起來沒什麼用的feature<br>未用c++17前程式碼長這樣</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">template &lt;typename T, T v&gt;</span><br><span class="line">struct integral_constant &#123;</span><br><span class="line">    static constexpr T value &#x3D; v;</span><br><span class="line">&#125;;</span><br><span class="line">integral_constant&lt;int, 1024&gt;::value;</span><br></pre></td></tr></table></figure>
<p>用了C++17後</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">template &lt;auto v&gt;</span><br><span class="line">struct integral_constant &#123;</span><br><span class="line">    static constexpr auto value &#x3D; v;</span><br><span class="line">&#125;;</span><br><span class="line">integral_constant&lt;1024&gt;::value;</span><br></pre></td></tr></table></figure>

<h3 id="nested-namespace"><a href="#nested-namespace" class="headerlink" title="nested namespace"></a>nested namespace</h3><p>早該有的東西, 結果拖到這麼後面才加進來</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> X &#123;</span><br><span class="line">    <span class="keyword">namespace</span> Y &#123;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">Foo</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>現在可以寫成</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> X::Y &#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Foo</span>;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Fold-expression"><a href="#Fold-expression" class="headerlink" title="Fold expression"></a>Fold expression</h3><p>以加法為範例<br>在c++17之前的寫法</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function">T <span class="title">sum</span><span class="params">(T v)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> v;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function">T <span class="title">sum</span><span class="params">(T first, Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> first + sum(args...);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>把sum寫成兩部分，雖然不是不行，不過總覺得被切割加重學習負擔<br>用上<code>if constexpr</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Args&gt;</span><br><span class="line"><span class="function">T <span class="title">sum</span><span class="params">(T first, Args... args)</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">if</span> <span class="title">constexpr</span> <span class="params">(<span class="keyword">sizeof</span>...(Args) == <span class="number">0</span>)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> first;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> first + sum(args...);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>好一點了，用上Fold expression會變成怎樣</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> ...Args&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">sum</span><span class="params">(Args&amp;&amp;... args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (args + ...); <span class="comment">// OK</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>跟<code>if constexpr</code>方法比是更精簡了一點，不過多了一堆語法規則，實在不太划算</p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p>— <a href="https://hackernoon.com/a-tour-of-c-17-if-constexpr-3ea62f62ff65" target="_blank" rel="noopener">A Tour of C++ 17: If Constexpr</a><br>— <a href="http://purecpp.org/?p=1375" target="_blank" rel="noopener">C++17中的deduction guide</a><br>— <a href="https://baptiste-wicht.com/posts/2015/05/cpp17-fold-expressions.html" target="_blank" rel="noopener">C++17 Fold Expressions</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/14/2017-10-14-summary-about-c-17-part-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/10/14/2017-10-14-summary-about-c-17-part-1/" class="post-title-link" itemprop="url">Summary about C++17 Part 1</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-10-14 12:47:00" itemprop="dateCreated datePublished" datetime="2017-10-14T12:47:00+00:00">2017-10-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>對於C++17特性的文章已經有很多了，歸納自己的想法寫成幾篇文章</p>
<h3 id="if-switch-init"><a href="#if-switch-init" class="headerlink" title="if / switch init"></a>if / switch init</h3><p>覺得很有用的特性之一<br>在沒有C++17之前，程式碼大概長這樣</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Foo *ptr = get_foo();</span><br><span class="line">        <span class="keyword">if</span> (!ptr)</span><br><span class="line">                do_something();</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                ptr-&gt;do_something();</span><br><span class="line">        more_code();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在C++17之後</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (Foo *ptr = get_foo(); !ptr)</span><br><span class="line">                do_something();</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">                ptr-&gt;do_something();</span><br><span class="line">        more_code();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Structure-Binding"><a href="#Structure-Binding" class="headerlink" title="Structure Binding"></a>Structure Binding</h3><p>在沒有Structure Binding時，程式碼大概長這樣</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">std::tuple&lt;int, double&gt; stuff();</span><br><span class="line"><span class="keyword">auto</span> tup = stuff();</span><br><span class="line"><span class="keyword">int</span> i = <span class="built_in">std</span>::get&lt;<span class="number">0</span>&gt;(tup);</span><br><span class="line"><span class="keyword">double</span> d = <span class="built_in">std</span>::get&lt;<span class="number">1</span>&gt;(tup);</span><br></pre></td></tr></table></figure>
<p>或者是</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="keyword">double</span> d;</span><br><span class="line"><span class="built_in">std</span>::tie(i, d) = tup;</span><br></pre></td></tr></table></figure>
<p>不過都比不上</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> [i, d] = stuff();</span><br></pre></td></tr></table></figure>
<p>傳統的</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">errcode <span class="title">doSomething</span><span class="params">(obj *out_value)</span></span>;</span><br></pre></td></tr></table></figure>
<p>之後會變成</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">std::tuple&lt;obj, errcode&gt; doSomething();</span><br><span class="line"><span class="keyword">auto</span> [obj, err] = doSomething();</span><br></pre></td></tr></table></figure>
<p>有點golang的感覺</p>
<p>不過看看以下程式碼</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Foo</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">string</span> str = <span class="string">"world"</span>;</span><br><span class="line">        ~Foo() &#123; <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; str &lt;&lt; <span class="string">"\n"</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">auto</span> [x, s] = Foo();</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello "</span>;</span><br><span class="line">	s = <span class="string">"Goodbye"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>結果出乎意料，不是大家所想的copy by value，而是copy by reference<br>Compiler大概做的是像這樣</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> temp = Foo();</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello "</span>;</span><br><span class="line">        temp.str = <span class="string">"Goodbye"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>還有下面這個範例</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">X</span> &#123;</span> <span class="keyword">int</span> i = <span class="number">0</span>; &#125;;</span><br><span class="line"><span class="function">X <span class="title">makeX</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">        X x;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">auto</span> [ b ] = makeX();</span><br><span class="line">        b++;</span><br><span class="line">        <span class="keyword">auto</span> <span class="keyword">const</span> [ c ] = makeX();</span><br><span class="line">        c++;</span><br><span class="line">        <span class="keyword">auto</span> &amp; [ d ] = makeX();</span><br><span class="line">        d++;</span><br><span class="line">        <span class="keyword">auto</span> &amp; [ e ] = x;</span><br><span class="line">        e++;</span><br><span class="line">        <span class="keyword">auto</span> <span class="keyword">const</span> &amp; [ f ] = makeX();</span><br><span class="line">        f++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>– <code>c++</code> 編譯不過，因為這是bind to const reference<br>– <code>auto &amp; [d] = makeX()</code> 編譯不過，因為left reference不能bind to right value<br>– <code>f++</code> 編譯不過，理由同第一條</p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p>— <a href="https://github.com/tvaneerd/cpp17_in_TTs" target="_blank" rel="noopener">cpp17_in_TTs</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/10/10/2017-10-10-2866593/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/10/10/2017-10-10-2866593/" class="post-title-link" itemprop="url">Difference between auto and decltype(auto)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-10-10 02:39:00" itemprop="dateCreated datePublished" datetime="2017-10-10T02:39:00+00:00">2017-10-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>看看以下程式有什麼不一樣</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Obj</span> &#123;</span></span><br><span class="line">	Obj() &#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">"Default Constructor\n"</span>; &#125;</span><br><span class="line">	~Obj() &#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">"Destructor\n"</span>; &#125;</span><br><span class="line">	Obj(<span class="keyword">const</span> Obj &amp;) &#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">"Copy Constructor\n"</span>; &#125;</span><br><span class="line">	Obj(Obj &amp;&amp;) &#123; <span class="built_in">cout</span> &lt;&lt; <span class="string">"Move Constructor\n"</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">outer</span><span class="params">(T &amp;&amp; obj)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">std</span>::forward&lt;T&gt;(obj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">auto</span>&amp; obj = outer(Obj());</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>和</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">decltype</span>(<span class="keyword">auto</span>) <span class="title">outer</span><span class="params">(T &amp;&amp; obj)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">std</span>::forward&lt;T&gt;(obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>差異就在於auto和decltype的用途不太一樣，auto會去掉reference，而decltype(auto)不會</p>
<h3 id="C-11’s-solution"><a href="#C-11’s-solution" class="headerlink" title="C++11’s solution"></a>C++11’s solution</h3><p>C++11也可以達到decltype(auto)的方式，不過寫法比較繁瑣</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">auto outer(T&amp;&amp; obj) -&gt; decltype(std::forward&lt;T&gt;(obj)) &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">std</span>::forward&lt;T&gt;(obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/23/2017-09-23-2538228/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/09/23/2017-09-23-2538228/" class="post-title-link" itemprop="url">Introduction to cgroup</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-09-23 03:38:00" itemprop="dateCreated datePublished" datetime="2017-09-23T03:38:00+00:00">2017-09-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>cgroup是linux用來限制program使用Computer resource的一種方法<br>也是Docker的基礎</p>
<p>首先先安裝cgroup</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install cgroup-bin</span><br><span class="line">``` </span><br><span class="line">寫個程式</span><br><span class="line"></span><br><span class="line">``` python</span><br><span class="line">count = 0</span><br><span class="line"><span class="keyword">while</span> True:</span><br><span class="line">        count = count + 1</span><br></pre></td></tr></table></figure>
<p>不用看也知道他絕對吃滿cpu resource</p>
<p>所以該怎麼限制，例如只讓他吃20%的CPU</p>
<p>先建立cgroup的群組</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /sys/fs/cgroup/cpu <span class="comment"># 管理CPU資源的地方</span></span><br><span class="line">$ sudo mkdir calm <span class="comment"># 建立一個目錄</span></span><br><span class="line">$ ls calm <span class="comment"># 自動產生和cpu有關的規則</span></span><br><span class="line">cgroup.clone_children  cpuacct.stat   cpuacct.usage_percpu  cpu.cfs_quota_us  cpu.stat           tasks</span><br><span class="line">cgroup.procs           cpuacct.usage  cpu.cfs_period_us     cpu.shares        notify_on_release</span><br></pre></td></tr></table></figure>

<p>接著把我們程式限制的規則加入群組 <strong>以下動作需要root權限，sudo無法執行</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> 20000 &gt; calm/cpu.cfs_quota_us <span class="comment"># 預設值是100000，20000正好是20%</span></span><br><span class="line">$ <span class="built_in">echo</span> 3255 &gt; calm/tasks <span class="comment"># 3255 是程式的 PID</span></span><br></pre></td></tr></table></figure>

<p>接著我們就能看到程式CPU使用率就只剩20%了</p>
<h3 id="Another-method"><a href="#Another-method" class="headerlink" title="Another method"></a>Another method</h3><p>也可以用自定義規則的方式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo cgcreate -g cpu:calm <span class="comment"># 一樣是建立 cpu calm</span></span><br><span class="line">$ sudo cgset -r cpu.cfs_quota_us=20000 calm <span class="comment"># 跟上面差不多</span></span><br><span class="line">$ sudo cgget calm <span class="comment"># 列出calm的所有規則</span></span><br><span class="line">$ sudo cgdelete calm</span><br></pre></td></tr></table></figure>

<p>如果要執行程式的話</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo cgexec -g cpu:calm python busy.py</span><br></pre></td></tr></table></figure>
<p>跟上面有同樣的效果</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/11/2017-09-11-define-custom-error-code-in-c-11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/09/11/2017-09-11-define-custom-error-code-in-c-11/" class="post-title-link" itemprop="url">Define custom error_code in C++11</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-09-11 14:12:00" itemprop="dateCreated datePublished" datetime="2017-09-11T14:12:00+00:00">2017-09-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>之前大概有寫過C++11 error_code的文章，不過覺得不夠清楚<br>這篇當作補充</p>
<h3 id="定義Error"><a href="#定義Error" class="headerlink" title="定義Error"></a>定義Error</h3><p>為了示範，僅定義幾個錯誤</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;system_error&gt;</span></span></span><br><span class="line"><span class="keyword">enum</span> <span class="class"><span class="keyword">class</span> <span class="title">MyErrC</span> &#123;</span></span><br><span class="line">	FileNotFound = <span class="number">1</span>,</span><br><span class="line">	InvalidArgs</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="定義Error-Category"><a href="#定義Error-Category" class="headerlink" title="定義Error Category"></a>定義Error Category</h3><p>定義Error的Domain，需要繼承自<code>std::error_category</code>，範例如下</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyErrCategory</span> :</span> <span class="built_in">std</span>::error_category &#123;</span><br><span class="line"><span class="keyword">public</span>: </span><br><span class="line">	<span class="function"><span class="keyword">const</span> <span class="keyword">char</span>* <span class="title">name</span><span class="params">()</span> <span class="keyword">const</span> <span class="keyword">noexcept</span> <span class="keyword">override</span> </span>&#123; <span class="keyword">return</span> <span class="string">"MyErrCategory"</span>;  &#125;</span><br><span class="line">	<span class="function"><span class="built_in">std</span>::<span class="built_in">string</span> <span class="title">message</span><span class="params">(<span class="keyword">int</span> ev)</span> <span class="keyword">const</span> </span>&#123;</span><br><span class="line">		<span class="keyword">switch</span> (<span class="keyword">static_cast</span>&lt;MyErrC&gt;(ev)) &#123;</span><br><span class="line">		<span class="keyword">case</span> MyErrC::FileNotFound:</span><br><span class="line">			<span class="keyword">return</span> <span class="string">"File not found"</span>;</span><br><span class="line">		<span class="keyword">case</span> MyErrC::InvalidArgs:</span><br><span class="line">			<span class="keyword">return</span> <span class="string">"Invalid Args"</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="keyword">return</span> <span class="string">"(unrecognized error)"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="make-error-code"><a href="#make-error-code" class="headerlink" title="make_error_code"></a>make_error_code</h3><p>定義完Error Class和Category Class之後，就可以寫出make_error_code</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">std</span>::error_code <span class="title">make_error_code</span><span class="params">(MyErrC e)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">const</span> MyErrCategory category&#123;&#125;;</span><br><span class="line">	<span class="keyword">return</span> &#123; <span class="keyword">static_cast</span>&lt;<span class="keyword">int</span>&gt;(e), category &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="helper-structure"><a href="#helper-structure" class="headerlink" title="helper structure"></a>helper structure</h3><p>不過就算這樣還是有點麻煩，我們希望寫出這樣的程式碼</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>:error_code err = MyErrC::FileNotFound;</span><br></pre></td></tr></table></figure>
<p>因此需要一個helper structure</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> <span class="built_in">std</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">template</span> &lt;&gt;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">is_error_code_enum</span>&lt;MyErrC&gt; :</span> true_type &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因此上面那行程式碼就能通過編譯了</p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p>– <a href="https://akrzemi1.wordpress.com/2017/07/12/your-own-error-code/" target="_blank" rel="noopener">Your own error code</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/09/2017-09-09-2330346/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/09/09/2017-09-09-2330346/" class="post-title-link" itemprop="url">Type deduction in C++ Range-Base Loop</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-09-09 03:25:00" itemprop="dateCreated datePublished" datetime="2017-09-09T03:25:00+00:00">2017-09-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>自從C++11有了auto和decltype之後，整個coding style有了很大的改變<br>現在我們有一個字串統計的map，該怎麼走訪這個map才好</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt; wordCount;</span><br></pre></td></tr></table></figure>

<h3 id="pre-C-11"><a href="#pre-C-11" class="headerlink" title="pre-C++11"></a>pre-C++11</h3><p>沒別招了</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">int</span>&gt;::iterator it = wordCount.begin();</span><br><span class="line">	it != wordCount.end(); ++it) &#123;</span><br><span class="line">	<span class="comment">// do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>雖然可以用typename簡化<code>map&lt;string, int&gt;::iterator</code>不過大同小異，看起來也不怎麼美觀</p>
<h3 id="C-11"><a href="#C-11" class="headerlink" title="C++11"></a>C++11</h3><p>auto被賦予了新生命，於是可以寫出這樣的程式碼</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> &amp;p : wordCount) &#123;</span><br><span class="line">	<span class="comment">// do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>C++17引進了structure binding進一步簡化</p>
<h3 id="C-17"><a href="#C-17" class="headerlink" title="C++17"></a>C++17</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> &amp;[word, count] : wordCount) &#123;</span><br><span class="line">	<span class="comment">// do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/29/2017-07-29-parse-string-in-c/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/07/29/2017-07-29-parse-string-in-c/" class="post-title-link" itemprop="url">Parse string in C++</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-07-29 01:52:00" itemprop="dateCreated datePublished" datetime="2017-07-29T01:52:00+00:00">2017-07-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
                </span>
                  , 
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/Boost/" itemprop="url" rel="index"><span itemprop="name">Boost</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>不管從哪個角度看，切割字串都不是件簡單的工作<br>即便是簡單的字串格式</p>
<h3 id="The-simplest-Example"><a href="#The-simplest-Example" class="headerlink" title="The simplest Example"></a>The simplest Example</h3><p>先來個C語言處理方式</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> str[] = <span class="string">"Tom 42"</span>;</span><br><span class="line">	<span class="keyword">int</span> value;</span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">30</span>];</span><br><span class="line">	<span class="built_in">sscanf</span>(str, <span class="string">"%s %d"</span>, name, &amp;value);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%s %d\n"</span>, name, value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>C++的版本</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> str = <span class="string">"Tom 42"</span>;</span><br><span class="line">	<span class="keyword">int</span> value;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> name;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">stringstream</span> ss;</span><br><span class="line">	ss &lt;&lt; str;</span><br><span class="line">	ss &gt;&gt; name &gt;&gt; value;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; name &lt;&lt; <span class="string">" "</span> &lt;&lt; value &lt;&lt; <span class="string">"\n"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>看起來相差無幾，也沒需要動用到其他武器的地方<br>不過如果情況更複雜該怎麼辦</p>
<h3 id="More-Complex-issue"><a href="#More-Complex-issue" class="headerlink" title="More Complex issue"></a>More Complex issue</h3><p>例如輸入的字串是<code>Tom: 42</code><br>如果什麼都不改的話，name會得到<code>Tom:</code>，不是我們想要的<br>如果改C語言的版本Parse string的字串</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sscanf</span>(str, <span class="string">"%s: %d"</span>, name, &amp;value);</span><br></pre></td></tr></table></figure>
<p>結果也不是我們想要的<br>看看C++的版本，不改的話結果一樣<br>如果改成這樣</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> value;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">string</span> name, unused;</span><br><span class="line">ss &gt;&gt; name &gt;&gt; unused &gt;&gt; value;</span><br></pre></td></tr></table></figure>
<p>很顯然地也不對</p>
<h3 id="Strtok"><a href="#Strtok" class="headerlink" title="Strtok"></a>Strtok</h3><p>如果不動用重型武器，這是我唯一想得出來的方法</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> str[] = <span class="string">"Tom: 42"</span>, *p = strtok(str, <span class="string">":"</span>);</span><br><span class="line">	<span class="keyword">int</span> value;</span><br><span class="line">	<span class="keyword">char</span> name[<span class="number">30</span>];</span><br><span class="line">	<span class="built_in">strcpy</span>(name, p);</span><br><span class="line">	p = strtok(<span class="literal">NULL</span>, <span class="string">":"</span>);</span><br><span class="line">	value = atoi(p);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%s %d\n"</span>, name, value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>雖然解決了問題，不過程式碼支離破碎，維護起來也是麻煩透頂<br>萬一字串變成 <code>Tom: 42, 123</code>該怎麼辦</p>
<h3 id="Boost-Spirit"><a href="#Boost-Spirit" class="headerlink" title="Boost Spirit"></a>Boost Spirit</h3><p>這世上不缺聰明人，想到了優雅到爆炸的作法<br>在C++內嵌DSL Parser解決問題，而使用的就是Boost Spirit<br>不過要說缺點的話，出錯Debug很麻煩</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/spirit/include/qi.hpp&gt;</span></span></span><br><span class="line"><span class="keyword">namespace</span> qi = boost::spirit::qi;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> str = <span class="string">"Tom: 42"</span>;</span><br><span class="line">	<span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span>::const_iterator It;</span><br><span class="line">	It iter = str.begin(), end = str.end();</span><br><span class="line">	<span class="keyword">int</span> value;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> name;</span><br><span class="line">	<span class="keyword">bool</span> r = qi::phrase_parse(iter, end, </span><br><span class="line">		(*(qi::char_ - <span class="string">':'</span>) &gt;&gt; <span class="string">":"</span> &gt;&gt; qi::int_), qi::ascii::blank, </span><br><span class="line">		name, value);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (r &amp;&amp; iter == end) &#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Parsing succeeded\n"</span>;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; name &lt;&lt; <span class="string">" "</span> &lt;&lt; value &lt;&lt; <span class="string">"\n"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Parsing failed\n"</span>;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"stopped at: \""</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">string</span>(iter, end) &lt;&lt; <span class="string">"\"\n"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>就如同上面說的如果要修改字串成<code>Tom: 42, 123</code><br>我們可以將Parser寫成</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bool</span> r = qi::phrase_parse(iter, end, </span><br><span class="line">	(*(qi::char_ - <span class="string">':'</span>) &gt;&gt; <span class="string">":"</span> &gt;&gt; qi::int_ &gt;&gt; <span class="string">","</span> &gt;&gt; qi::int_), qi::ascii::blank, </span><br><span class="line">	name, value, value1);</span><br></pre></td></tr></table></figure>
<p>高明的不得了</p>
<h3 id="Rule-amp-Grammer"><a href="#Rule-amp-Grammer" class="headerlink" title="Rule &amp; Grammer"></a>Rule &amp; Grammer</h3><p>當要Parse的字串越來越複雜，就可以自己定義Grammer和Rule了</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/tuple/tuple.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/spirit/include/qi.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/fusion/include/boost_tuple.hpp&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> MyTuple = boost::tuple&lt;<span class="built_in">std</span>::<span class="built_in">string</span>, <span class="keyword">int</span>, <span class="keyword">int</span>&gt;;</span><br><span class="line"><span class="keyword">namespace</span> qi = boost::spirit::qi;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator, <span class="keyword">typename</span> Skipper = qi::ascii::blank_type&gt;</span><br><span class="line">struct StringGrammar : qi::grammar &lt;Iterator, MyTuple(), Skipper&gt; &#123;</span><br><span class="line">	StringGrammar() : StringGrammar::base_type(parser, <span class="string">"StringParser Grammar"</span>) &#123;</span><br><span class="line">		name = *(qi::char_ - <span class="string">':'</span>);</span><br><span class="line">		value = qi::int_;</span><br><span class="line"></span><br><span class="line">		parser = name &gt;&gt; <span class="string">":"</span> &gt;&gt; value &gt;&gt; <span class="string">","</span> &gt;&gt; value;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	qi::rule&lt;Iterator, MyTuple(), Skipper&gt; parser;</span><br><span class="line">	<span class="comment">// lexemes</span></span><br><span class="line">	qi::rule&lt;Iterator, <span class="built_in">std</span>::<span class="built_in">string</span>(), Skipper&gt; name;</span><br><span class="line">	qi::rule&lt;Iterator, <span class="keyword">int</span>(), Skipper&gt; value;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> str = <span class="string">"Tom: 42, 123"</span>;</span><br><span class="line">	<span class="keyword">typedef</span> <span class="built_in">std</span>::<span class="built_in">string</span>::const_iterator It;</span><br><span class="line">	StringGrammar&lt;It&gt; grammer;</span><br><span class="line">	It iter = str.begin(), end = str.end();</span><br><span class="line">	MyTuple v;</span><br><span class="line">	<span class="keyword">bool</span> r = qi::phrase_parse(iter, end, </span><br><span class="line">		grammer, qi::ascii::blank,</span><br><span class="line">		v);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (r &amp;&amp; iter == end) &#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Parsing succeeded\n"</span>;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; boost::get&lt;<span class="number">0</span>&gt;(v) &lt;&lt; <span class="string">" "</span> &lt;&lt; boost::get&lt;<span class="number">1</span>&gt;(v) &lt;&lt; <span class="string">" "</span> &lt;&lt; boost::get&lt;<span class="number">2</span>&gt;(v) &lt;&lt; <span class="string">"\n"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Parsing failed\n"</span>;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"stopped at: \""</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">string</span>(iter, end) &lt;&lt; <span class="string">"\"\n"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>經過測試，如果省略後面<code>Skipper</code>的模板定義，整個Grammer不會正常運作</p>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p>– <a href="http://boost-spirit.com/home/category/qi-example/" target="_blank" rel="noopener">Home of The Boost.Spirit Library</a><br>– <a href="https://medium.com/@alinakipoglu/parsing-with-spirit-qi-fcaeaf4357b3" target="_blank" rel="noopener">Parsing with Spirit Qi</a><br>– <a href="https://www.suninf.net/2011/06/spirit-qi-in-boost.html" target="_blank" rel="noopener">spirit.Qi in boost</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/15/2017-07-15-introduction-to-woboq-codebrowser/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/07/15/2017-07-15-introduction-to-woboq-codebrowser/" class="post-title-link" itemprop="url">Introduction to Woboq CodeBrowser</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-07-15 03:22:00" itemprop="dateCreated datePublished" datetime="2017-07-15T03:22:00+00:00">2017-07-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近都在猛K機器學習, 有點荒廢了寫作<br>終於有時間可以寫點東西, 常常有在網路上看程式碼的需求,<br>於是就有新的工具誕生了</p>
<h3 id="Build-Woboq-CodeBrowser"><a href="#Build-Woboq-CodeBrowser" class="headerlink" title="Build Woboq CodeBrowser"></a>Build Woboq CodeBrowser</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install clang llvm libclang-dev</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/woboq/woboq_codebrowser</span><br><span class="line">$ <span class="built_in">cd</span> woboq_codebrowser</span><br><span class="line">$ cmake . -DLLVM_CONFIG_EXECUTABLE=/usr/bin/llvm-config -DCMAKE_BUILD_TYPE=Release</span><br><span class="line">$ make -j 4</span><br></pre></td></tr></table></figure>

<h3 id="Take-an-example"><a href="#Take-an-example" class="headerlink" title="Take an example"></a>Take an example</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/basiliscos/cpp-bredis</span><br><span class="line">$ <span class="built_in">cd</span> cpp-bredis</span><br><span class="line">$ OUTPUTDIRECTORY=~/public_html/codebrowser</span><br><span class="line">$ DATADIRECTORY=<span class="variable">$OUTPUTDIRECTORY</span>/../data</span><br><span class="line">$ BUILDIRECTORY=<span class="variable">$PWD</span></span><br><span class="line">$ VERSION=`git describe --always --tags`</span><br><span class="line">$ cmake . -DCMAKE_EXPORT_COMPILE_COMMANDS=ON</span><br><span class="line">$ ~/woboq_codebrowser/generator/codebrowser_generator -b <span class="variable">$BUILDIRECTORY</span> -a -o <span class="variable">$OUTPUTDIRECTORY</span> -p codebrowser:<span class="variable">$BUILDIRECTORY</span>:<span class="variable">$VERSION</span></span><br><span class="line">$ ~/woboq_codebrowser/indexgenerator/codebrowser_indexgenerator <span class="variable">$OUTPUTDIRECTORY</span></span><br><span class="line">$ cp -rv ~/woboq_codebrowser/data <span class="variable">$DATADIRECTORY</span></span><br></pre></td></tr></table></figure>

<p>值得注意的是, 這邊用cmake的out of build不起作用<br>所以就只能在root directory放在一起</p>
<p>之後就可以直接用Browser來看程式碼了</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/07/2017-06-07-1930648/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="HungMingWu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="第十三號艦隊">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/06/07/2017-06-07-1930648/" class="post-title-link" itemprop="url">Build Caffe2 on Visual Studio 2017</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-06-07 14:06:00" itemprop="dateCreated datePublished" datetime="2017-06-07T14:06:00+00:00">2017-06-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-10-06 01:47:17" itemprop="dateModified" datetime="2025-10-06T01:47:17+00:00">2025-10-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>忽略其他 3rd-party的部分, 編譯一個極簡版的caffe2<br>為了方便, 把步驟記錄起來</p>
<h3 id="Dependency"><a href="#Dependency" class="headerlink" title="Dependency"></a>Dependency</h3><p>– CMake<br>– Python3<br>– Numpy</p>
<h3 id="下載程式碼"><a href="#下載程式碼" class="headerlink" title="下載程式碼"></a>下載程式碼</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --recursive https://github.com/caffe2/caffe2.git</span><br></pre></td></tr></table></figure>

<p>接著進入Visual studio native tools command prompt進行編譯過程</p>
<h3 id="Build-Protoc"><a href="#Build-Protoc" class="headerlink" title="Build Protoc"></a>Build Protoc</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scripts\build_host_protoc.bat</span><br></pre></td></tr></table></figure>
<p>warning都可以忽略, 可以產生可用的protoc</p>
<h3 id="Build-Caffe2"><a href="#Build-Caffe2" class="headerlink" title="Build Caffe2"></a>Build Caffe2</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scripts\build_windows.bat</span><br></pre></td></tr></table></figure>
<p>這樣就能產生caffe2 library了, 也可以打開caffe.sln來看</p>
<p>其實最麻煩的反而是’Dependecny`那塊, 需要手動安裝<br>目前的Caffe2只支援CPU Mode</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          
<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">HungMingWu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">258</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">148</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">HungMingWu</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
